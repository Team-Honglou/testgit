{"version":3,"file":"mini-area.component.js","sourceRoot":"","sources":["../../../../.ng_build/abc/charts/mini-area/mini-area.component.ts"],"names":[],"mappings":"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","sourcesContent":["import { Component, Input, HostBinding, ViewChild, ElementRef, OnDestroy, OnChanges, SimpleChanges, NgZone, OnInit, ChangeDetectorRef, ChangeDetectionStrategy } from '@angular/core';\r\nimport { coerceNumberProperty, coerceBooleanProperty } from '@angular/cdk/coercion';\r\n\r\n@Component({\r\n    selector: 'mini-area',\r\n    template: `<div #container></div>`,\r\n    styles: [`:host { display: block; }`],\r\n    changeDetection: ChangeDetectionStrategy.OnPush\r\n})\r\nexport class MiniAreaComponent implements OnDestroy, OnChanges, OnInit {\r\n\r\n    // region: fields\r\n\r\n    @Input() color = 'rgba(24, 144, 255, 0.2)';\r\n    @Input() borderColor = '#1890FF';\r\n    @Input()\r\n    get borderWidth() { return this._borderWidth; }\r\n    set borderWidth(value: any) {\r\n        this._borderWidth = coerceNumberProperty(value);\r\n    }\r\n    private _borderWidth = 2;\r\n\r\n    @HostBinding('style.height.px')\r\n    @Input()\r\n    get height() { return this._height; }\r\n    set height(value: any) {\r\n        this._height = coerceNumberProperty(value);\r\n    }\r\n    private _height;\r\n\r\n    @Input()\r\n    get fit() { return this._fit; }\r\n    set fit(value: any) {\r\n        this._fit = coerceBooleanProperty(value);\r\n    }\r\n    private _fit = true;\r\n\r\n    @Input()\r\n    get line() { return this._line; }\r\n    set line(value: any) {\r\n        this._line = coerceBooleanProperty(value);\r\n    }\r\n    private _line = false;\r\n\r\n    @Input()\r\n    get animate() { return this._animate; }\r\n    set animate(value: any) {\r\n        this._animate = coerceBooleanProperty(value);\r\n    }\r\n    private _animate = true;\r\n\r\n    @Input() xAxis: any;\r\n    @Input() yAxis: any;\r\n    @Input() padding: number[] = [ 8, 8, 8, 8 ];\r\n    @Input() data: Array<{ x: number, y: number, [key: string]: any }>;\r\n\r\n    // endregion\r\n\r\n    @ViewChild('container') node: ElementRef;\r\n\r\n    chart: any;\r\n    initFlag = false;\r\n\r\n    constructor(private cd: ChangeDetectorRef) { }\r\n\r\n    ngOnInit(): void {\r\n        this.initFlag = true;\r\n        setTimeout(() => this.install(), 100);\r\n    }\r\n\r\n    install() {\r\n        if (!this.data || (this.data && this.data.length < 1)) return;\r\n\r\n        this.node.nativeElement.innerHTML = '';\r\n\r\n        const chart = new G2.Chart({\r\n            container: this.node.nativeElement,\r\n            forceFit: this.fit,\r\n            height: +this.height,\r\n            animate: this.animate,\r\n            padding: this.padding,\r\n            legend: null\r\n        });\r\n\r\n        if (!this.xAxis && !this.yAxis) {\r\n            chart.axis(false);\r\n        }\r\n\r\n        if (this.xAxis) {\r\n            chart.axis('x', this.xAxis);\r\n        } else {\r\n            chart.axis('x', false);\r\n        }\r\n\r\n        if (this.yAxis) {\r\n            chart.axis('y', this.yAxis);\r\n        } else {\r\n            chart.axis('y', false);\r\n        }\r\n\r\n        const dataConfig = {\r\n            x: {\r\n                type: 'cat',\r\n                range: [0, 1],\r\n                xAxis: this.xAxis\r\n            },\r\n            y: {\r\n                min: 0,\r\n                yAxis: this.yAxis\r\n            }\r\n        };\r\n\r\n        chart.tooltip({\r\n            showTitle: false,\r\n            hideMarkders: false,\r\n            'g2-tooltip': { padding: 4 },\r\n            'g2-tooltip-list-item': { margin: `0px 4px` }\r\n        });\r\n\r\n        const view = chart.view();\r\n        view.source(this.data, dataConfig);\r\n\r\n        view.area()\r\n            .position('x*y')\r\n            .color(this.color)\r\n            .tooltip('x*y', (x, y) => {\r\n                return {\r\n                    name: x,\r\n                    value: y\r\n                };\r\n            })\r\n            .shape('smooth')\r\n            .style({ fillOpacity: 1 });\r\n\r\n        if (this.line) {\r\n            const view2 = chart.view();\r\n            view2.source(this.data, dataConfig);\r\n            view2.line().position('x*y').color(this.borderColor).size(this.borderWidth).shape('smooth');\r\n            view2.tooltip(false);\r\n        }\r\n        chart.render();\r\n        this.chart = chart;\r\n    }\r\n\r\n    uninstall() {\r\n        if (this.chart) {\r\n            this.chart.destroy();\r\n            this.chart = null;\r\n        }\r\n    }\r\n\r\n    ngOnChanges(changes: SimpleChanges): void {\r\n        if (this.initFlag)\r\n            this.install();\r\n    }\r\n\r\n    ngOnDestroy(): void {\r\n        this.uninstall();\r\n    }\r\n}\r\n"]}