{"version":3,"file":"pro-header.component.js","sourceRoot":"","sources":["../../../.ng_build/abc/pro-header/pro-header.component.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,SAAS,EAAE,KAAK,EAAE,UAAU,EAAE,WAAW,EAAE,YAAY,EAAyB,MAAM,EAAE,SAAS,EAAE,MAAM,eAAe,CAAC;AAClI,OAAO,EAAkB,MAAM,EAAE,MAAM,iBAAiB,CAAC;AACzD,OAAO,EAAE,qBAAqB,EAAE,MAAM,uBAAuB,CAAC;AAC9D,OAAO,EAAE,WAAW,EAAE,gBAAgB,EAAoB,MAAM,cAAc,CAAC;;IA6D3E,YAAY;IAEZ,4BACY,KAAa,EACb,OAAoB,EACM,SAC1B,EAAc,EAAU,QAAmB;QAH3C,UAAK,GAAL,KAAK,CAAQ;QACb,YAAO,GAAP,OAAO,CAAa;QACM,YAAO,GAAP,OAAO;QACjC,OAAE,GAAF,EAAE,CAAY;QAAU,aAAQ,GAAR,QAAQ,CAAW;+BAtB7B,IAAI;qBAEf,EAAE;KAoB0C;0BA1BvD,8CAAc;;;;sBAAK,MAAM,CAAC,IAAI,CAAC,eAAe,CAAC;aACnD,UAAmB,KAAU;YACzB,IAAI,CAAC,eAAe,GAAG,qBAAqB,CAAC,KAAK,CAAC,CAAC;SACvD;;;;IAyBO,0CAAa,GAArB;QAAA,iBAgBC;QAfG,EAAE,CAAC,CAAC,IAAI,CAAC,UAAU,IAAI,CAAC,IAAI,CAAC,cAAc,CAAC;YAAC,MAAM,CAAC;QACpD,IAAM,KAAK,GAAG,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;QACxD,EAAE,CAAC,CAAC,KAAK,CAAC,MAAM,IAAI,CAAC,CAAC;YAAC,MAAM,CAAE;QAC/B,IAAM,KAAK,GAAU,EAAE,CAAC;QACxB,KAAK,CAAC,OAAO,CAAC,UAAA,IAAI;YACd,IAAI,KAAK,CAAC;YACV,EAAE,CAAC,CAAC,IAAI,CAAC,SAAS,CAAC;gBAAC,KAAK,GAAG,KAAI,CAAC,OAAO,CAAC,KAAK,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;YAC/D,KAAK,CAAC,IAAI,CAAC,EAAE,KAAK,EAAE,KAAK,IAAI,IAAI,CAAC,IAAI,EAAE,IAAI,EAAE,IAAI,CAAC,IAAI,IAAI,CAAE,IAAI,CAAC,IAAI,CAAE,EAAE,CAAC,CAAC;SAC/E,CAAC,CAAC;;QAEH,KAAK,CAAC,MAAM,CAAC,CAAC,EAAE,CAAC,EAAE;YACf,KAAK,EAAE,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,MAAM,CAAC,IAAI,MAAM;YAC3C,IAAI,EAAE,CAAE,GAAG,CAAE;SAChB,CAAC,CAAC;QACH,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;KACtB;IAED,qCAAQ,GAAR;QACK,IAAI,CAAC,EAAE,CAAC,aAA6B,CAAC,SAAS,CAAC,GAAG,CAAC,gBAAgB,EAAE,YAAY,CAAC,CAAC;QACrF,IAAI,CAAC,aAAa,EAAE,CAAC;KACxB;;gBAxFJ,SAAS,SAAC;oBACP,QAAQ,EAAE,YAAY;oBACtB,QAAQ,EAAE,8sCAwBT;oBACD,SAAS,EAAE,CAAE,kBAAkB,CAAE;iBACpC;;;;gBAhCwB,MAAM;gBAEtB,WAAW;gDAkEX,MAAM,SAAC,gBAAgB;gBArEL,UAAU;gBAA4D,SAAS;;;0BAsCrG,KAAK;mCAKL,KAAK;+BASL,YAAY,SAAC,YAAY;yBAEzB,YAAY,SAAC,MAAM;2BAEnB,YAAY,SAAC,QAAQ;4BAErB,YAAY,SAAC,SAAS;0BAEtB,YAAY,SAAC,OAAO;wBAEpB,YAAY,SAAC,KAAK;;6BA9DvB;;SAkCa,kBAAkB","sourcesContent":["import { Component, Input, ElementRef, TemplateRef, ContentChild, OnInit, AfterViewInit, Inject, Renderer2 } from '@angular/core';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { coerceBooleanProperty } from '@angular/cdk/coercion';\r\nimport { MenuService, ALAIN_I18N_TOKEN, AlainI18NService } from '@delon/theme';\r\n\r\n@Component({\r\n    selector: 'pro-header',\r\n    template: `\r\n    <ng-container *ngIf=\"!breadcrumb; else breadcrumb\">\r\n        <nz-breadcrumb>\r\n            <nz-breadcrumb-item *ngFor=\"let i of paths\">\r\n                <ng-container *ngIf=\"i.link\"><a [routerLink]=\"i.link\">{{i.title}}</a></ng-container>\r\n                <ng-container *ngIf=\"!i.link\">{{i.title}}</ng-container>\r\n            </nz-breadcrumb-item>\r\n        </nz-breadcrumb>\r\n    </ng-container>\r\n    <div class=\"detail\">\r\n        <div *ngIf=\"logo\" class=\"logo\"><ng-template [ngTemplateOutlet]=\"logo\"></ng-template></div>\r\n        <div class=\"main\">\r\n            <div class=\"row\">\r\n                <h1 *ngIf=\"title\" class=\"title\">{{title}}</h1>\r\n                <div *ngIf=\"action\" class=\"action\"><ng-template [ngTemplateOutlet]=\"action\"></ng-template></div>\r\n            </div>\r\n            <div class=\"row\">\r\n                <div *ngIf=\"content\" class=\"desc\"><ng-template [ngTemplateOutlet]=\"content\"></ng-template></div>\r\n                <div *ngIf=\"extra\" class=\"extra\"><ng-template [ngTemplateOutlet]=\"extra\"></ng-template></div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <ng-content></ng-content>\r\n    <ng-template [ngTemplateOutlet]=\"tab\"></ng-template>\r\n    `,\r\n    styleUrls: [ './pro-header.css' ]\r\n})\r\nexport class ProHeaderComponent implements OnInit {\r\n\r\n    // region fields\r\n\r\n    @Input() title: string;\r\n\r\n    /**\r\n     * 自动生成导航，以当前路由从主菜单中定位\r\n     */\r\n    @Input()\r\n    get autoBreadcrumb() { return this._autoBreadcrumb; }\r\n    set autoBreadcrumb(value: any) {\r\n        this._autoBreadcrumb = coerceBooleanProperty(value);\r\n    }\r\n    private _autoBreadcrumb = true;\r\n\r\n    paths: any[] = [];\r\n\r\n    @ContentChild('breadcrumb') breadcrumb: TemplateRef<any>;\r\n\r\n    @ContentChild('logo') logo: TemplateRef<any>;\r\n\r\n    @ContentChild('action') action: TemplateRef<any>;\r\n\r\n    @ContentChild('content') content: TemplateRef<any>;\r\n\r\n    @ContentChild('extra') extra: TemplateRef<any>;\r\n\r\n    @ContentChild('tab') tab: TemplateRef<any>;\r\n\r\n    // endregion\r\n\r\n    constructor(\r\n        private route: Router,\r\n        private menuSrv: MenuService,\r\n        @Inject(ALAIN_I18N_TOKEN) private i18nSrv: AlainI18NService,\r\n        private el: ElementRef, private renderer: Renderer2) {}\r\n\r\n    private genBreadcrumb() {\r\n        if (this.breadcrumb || !this.autoBreadcrumb) return;\r\n        const menus = this.menuSrv.getPathByUrl(this.route.url);\r\n        if (menus.length <= 0) return ;\r\n        const paths: any[] = [];\r\n        menus.forEach(item => {\r\n            let title;\r\n            if (item.translate) title = this.i18nSrv.fanyi(item.translate);\r\n            paths.push({ title: title || item.text, link: item.link && [ item.link ] });\r\n        });\r\n        // add home\r\n        paths.splice(0, 0, {\r\n            title: this.i18nSrv.fanyi('home') || 'Home',\r\n            link: [ '/' ]\r\n        });\r\n        this.paths = paths;\r\n    }\r\n\r\n    ngOnInit() {\r\n        (this.el.nativeElement as HTMLElement).classList.add('content__title', 'pro-header');\r\n        this.genBreadcrumb();\r\n    }\r\n}\r\n"]}