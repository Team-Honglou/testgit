{"version":3,"file":"scroll.service.js","sourceRoot":"","sources":["../../../../.ng_build/theme/services/scroll/scroll.service.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,UAAU,EAAE,MAAM,EAAE,MAAM,eAAe,CAAC;AACnD,OAAO,EAAE,gBAAgB,EAAE,MAAM,iBAAiB,CAAC;AACnD,OAAO,EAAE,QAAQ,EAAE,MAAM,2BAA2B,CAAC;AACrD,OAAO,EAAE,SAAS,EAAE,MAAM,2BAA2B,CAAC;AAEtD,MAAM,CAAC,IAAM,SAAS,GAAG,EAAE,CAAC;;IAuB1B,uBAAuC,KAAkB,QAA0B;QAAnF,iBAEC;QAFsC,QAAG,GAAH,GAAG;QAAe,aAAQ,GAAR,QAAQ,CAAkB;QACjF,SAAS,CAAC,MAAM,EAAE,QAAQ,CAAC,CAAC,SAAS,CAAC,cAAM,OAAA,KAAI,CAAC,UAAU,GAAG,IAAI,EAAtB,CAAsB,CAAC,CAAC;KACrE;IAjBD,sBAAI,oCAAS;aAAb;YACE,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC;gBACnB,IAAM,SAAO,GAAG,IAAI,CAAC,GAAG,CAAC,aAAa,CAAC,SAAS,CAAC,CAAC;gBAClD,IAAI,CAAC,UAAU,GAAG,CAAC,SAAO,IAAI,SAAO,CAAC,YAAY,IAAI,CAAC,CAAC,GAAG,SAAS,CAAC;aACxE;YACD,MAAM,CAAC,IAAI,CAAC,UAAU,CAAC;SACxB;;;OAAA;IAED,sBAAI,2CAAgB;aAApB;YACE,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,iBAAiB,CAAC,CAAC,CAAC;gBAC5B,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC,GAAG,CAAC,cAAc,CAAC,aAAa,CAAC,IAAI,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC;aAClF;YACD,MAAM,CAAC,IAAI,CAAC,iBAAiB,CAAC;SAC/B;;;OAAA;IAMD,8BAAM,GAAN;QACE,IAAM,IAAI,GAAG,IAAI,CAAC,cAAc,EAAE,CAAC;QACnC,IAAM,OAAO,GAAgB,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,cAAc,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,gBAAgB,CAAC;QAC1F,IAAI,CAAC,eAAe,CAAC,OAAO,CAAC,CAAC;KAC/B;IAED,uCAAe,GAAf,UAAgB,OAAgB;QAC9B,EAAE,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC;YACZ,OAAO,CAAC,cAAc,EAAE,CAAC;YAEzB,EAAE,CAAC,CAAC,MAAM,IAAI,MAAM,CAAC,QAAQ,CAAC,CAAC,CAAC;gBAC9B,MAAM,CAAC,QAAQ,CAAC,CAAC,EAAE,OAAO,CAAC,qBAAqB,EAAE,CAAC,GAAG,GAAG,IAAI,CAAC,SAAS,CAAC,CAAC;gBAEzE,EAAE,CAAC,CAAC,MAAM,CAAC,WAAW,GAAG,EAAE,CAAC,CAAC,CAAC;oBAC5B,MAAM,CAAC,QAAQ,CAAC,CAAC,EAAE,CAAC,MAAM,CAAC,WAAW,CAAC,CAAC;iBACzC;aACF;SACF;KACF;IAED,mCAAW,GAAX;QACE,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,gBAAgB,CAAC,CAAC;KAC7C;IAEO,sCAAc,GAAtB;QACE,MAAM,CAAC,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,OAAO,CAAC,IAAI,EAAE,EAAE,CAAC,CAAC;KAC7C;;gBAnDF,UAAU;;;;gDAqBK,MAAM,SAAC,QAAQ;gBA3BtB,gBAAgB;;wBADzB;;SAQa,aAAa","sourcesContent":["import { Injectable, Inject } from '@angular/core';\nimport { PlatformLocation } from '@angular/common';\nimport { DOCUMENT } from '@angular/platform-browser';\nimport { fromEvent } from 'rxjs/observable/fromEvent';\n\nexport const topMargin = 16;\n\n@Injectable()\nexport class ScrollService {\n\n  private _topOffset: number | null;\n  private _topOfPageElement: Element;\n\n  get topOffset() {\n    if (!this._topOffset) {\n        const toolbar = this.doc.querySelector('.header');\n        this._topOffset = (toolbar && toolbar.clientHeight || 0) + topMargin;\n    }\n    return this._topOffset;\n  }\n\n  get topOfPageElement() {\n    if (!this._topOfPageElement) {\n      this._topOfPageElement = this.doc.getElementById('top-of-page') || this.doc.body;\n    }\n    return this._topOfPageElement;\n  }\n\n  constructor( @Inject(DOCUMENT) private doc: any, private location: PlatformLocation) {\n    fromEvent(window, 'resize').subscribe(() => this._topOffset = null);\n  }\n\n  scroll() {\n    const hash = this.getCurrentHash();\n    const element: HTMLElement = hash ? this.doc.getElementById(hash) : this.topOfPageElement;\n    this.scrollToElement(element);\n  }\n\n  scrollToElement(element: Element) {\n    if (element) {\n      element.scrollIntoView();\n\n      if (window && window.scrollBy) {\n        window.scrollBy(0, element.getBoundingClientRect().top - this.topOffset);\n\n        if (window.pageYOffset < 20) {\n          window.scrollBy(0, -window.pageYOffset);\n        }\n      }\n    }\n  }\n\n  scrollToTop() {\n    this.scrollToElement(this.topOfPageElement);\n  }\n\n  private getCurrentHash() {\n    return this.location.hash.replace(/^#/, '');\n  }\n}\n"]}