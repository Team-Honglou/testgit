import { urlBase64Decode } from './jwt.helper';
var JWTTokenModel = /** @class */ (function () {
    function JWTTokenModel() {
    }
    Object.defineProperty(JWTTokenModel.prototype, "payload", {
        /**
         * 获取载荷信息
         */
        get: /**
             * 获取载荷信息
             */
        function () {
            var parts = this.token.split('.');
            if (parts.length !== 3)
                throw new Error('JWT must have 3 parts');
            var decoded = urlBase64Decode(parts[1]);
            if (!decoded)
                throw new Error('Cannot decode the token');
            return JSON.parse(decoded);
        },
        enumerable: true,
        configurable: true
    });
    /**
     * 检查Token是否过期，`payload` 必须包含 `exp` 时有效
     *
     * @param {number} [offsetSeconds=0] 偏移量
     */
    /**
         * 检查Token是否过期，`payload` 必须包含 `exp` 时有效
         *
         * @param {number} [offsetSeconds=0] 偏移量
         */
    JWTTokenModel.prototype.isExpired = /**
         * 检查Token是否过期，`payload` 必须包含 `exp` 时有效
         *
         * @param {number} [offsetSeconds=0] 偏移量
         */
    function (offsetSeconds) {
        if (offsetSeconds === void 0) { offsetSeconds = 0; }
        var decoded = this.payload;
        if (!decoded.hasOwnProperty('exp'))
            return null;
        var date = new Date(0);
        date.setUTCSeconds(decoded.exp);
        if (date === null)
            return false;
        return !(date.valueOf() > (new Date().valueOf() + (offsetSeconds * 1000)));
    };
    return JWTTokenModel;
}());
export { JWTTokenModel };
//# sourceMappingURL=jwt.model.js.map